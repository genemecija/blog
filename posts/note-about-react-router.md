# A note about React Router
#### April 6th, 2020

I recently rebuilt this site using [React](https://reactjs.org/) (previously built with vanilla JavaScript, HTML, and CSS). Prior to the rebuild, the browser URL would be in sync with the section that was being served, e.g. <code>mysite.com/portfolio</code> would load the portfolio section and users could bookmark or visit that link and be taken directly to that section of the website.

With React, client-side routing is required to keep the browser URL in sync with your web application. In my LearnMorseCode.net web app, client-side routing wasn't really necessary, because it was a single page application (SPA) that didn't have navigable sections. For this site, since I did have sections that I wanted to be bookmarkable and accessible via those links, I did need client-side routing. In this case, I used [React Router](https://reacttraining.com/react-router/).

For my use case, implementing the switch, routes, and links of React Router were pretty straightforward and just took a bit of tinkering with to get working correctly on my local machine. Loading the site to my web host yielded different results.

### React Router 404
I could visit each section via the navbar links, however, when attempting to visit a section or blog post via entering the URL directly in the browser, I was presented a 404 page:

![react-router-404](urlhere "react-router-404")

This wasn't a 404 page I built or was routing to, so that meant off to the internet to find a solution. Lo and behold, this StackOverflow [solution](https://stackoverflow.com/a/39118509/9727835) for the question ***"react-router - im getting 404 after adding route"*** clued me in on what was wrong:

<blockquote>
This is because defining a route in React Router is a client-side route. If you request the url directly your server needs to understand that the client is going to handle the route.

The 404 is generated by the server because this is usually the default route behaviour.

Instead, configure your server so that the default is to send back the main html page with the client routes. Then, React Router will handle it on the client side based on the url.
</blockquote>

### A Server-Side Solution
So the problem was with server routing rather on the client side. I use HostGator to host this site and the server routing configuration is done within the .htaccess file. I edited the file, adding the below lines:

```
RewriteCond %{REQUEST_URI} ^/portfolio
RewriteRule ^(.*)$ / [P]
RewriteCond %{REQUEST_URI} ^/blog/(.*)$
RewriteRule ^(.*)$ / [P]
```
Theses line makes it so that requests that comes in that end with <code>/portfolio</code> or <code>/blog/[anything here]</code> will be routed to the main page (<code>/</code>), but will keep the originally requested URL. Keeping the originally requested URL is required for React Router to route to the correct part of the site.

After making the change to the .htaccess file, React Router worked as expected and routed the URLs correctly.

Learned something new today!